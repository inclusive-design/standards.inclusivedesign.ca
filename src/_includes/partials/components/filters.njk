{% set filterableOptions = { projects: [], types: [] } %}
{% for resource in collections['resources_' + lang] %}
    {% set filterableOptions = filterableOptions | objectArrayPush("projects", resource.data.projects) %}
    {% set filterableOptions = filterableOptions | objectArrayPush("types", resource.data.type) %}
{% endfor %}
<div id="filters" class="filters flow">
    <h3>{% __ 'filters' %}</h3>
    <div class="flow">
        <fieldset>
            <legend class="visually-hidden">{% __ 'project' %}</legend>
            {% disclosure 'project' %}
            <ul id="filter-project">
                {% for project in collections['projects_' + lang] %}
                    {% if project.data.uuid in filterableOptions.projects %}
                    <li>
                        <input type="checkbox" id="{{ project.data.uuid }}" name="project" value="{{ project.data.uuid }}" data-filter-key="projects" />
                        <label for="{{ project.data.uuid }}">{{ project.data.title }}</label>
                    </li>
                    {% endif %}
                {% endfor %}
            </ul>
            {% enddisclosure %}
        </fieldset>

        <fieldset>
            <legend class="visually-hidden">{% __ 'type' %}</legend>
            {% disclosure 'type' %}
            <ul id="filter-type">
                {% for value in filterableOptions.types %}
                <li>
                    <input type="checkbox" id="{{ value }}" name="type" value="{{ value }}" data-filter-key="type" />
                    <label for="{{ value }}">{% __ value %}</label>
                </li>
                {% endfor %}
            </ul>
            {% enddisclosure %}
        </fieldset>
    </div>
</div>
